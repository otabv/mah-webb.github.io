<!doctype html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    
        <title>Föreläsning 2 | Mah Webb</title>
    

    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Lato|Inconsolata" rel="stylesheet" type="text/css">

    <link href="/assets/css/normalize.css" rel="stylesheet">
    <link href="/assets/css/main.css" rel="stylesheet">
</head>

    <body class="instructions">
        <header id="header" class="header">
<div class="header-inner">
    <a class="brand" href="/" title="Gå till startsidan">Mah Webb</a>

    <ul class="navigation">
        <li>
            <a href="/courses" title="Gå till kursöversikt">Kurser</a>
        </li>
        <li>
            <a href="/blog" title="Gå till bloggöversikt">Blogg</a>
        </li>
        <li>
            <a href="/contact" title="Gå till kontaktsidan">Kontakt</a>
        </li>
    </ul>
</div>
</header>

        <div id="sidebar" class="sidebar">
    <div id="toggle-sidebar" class="toggle-sidebar">...</div>

    <h3 class="course-name">
        <a href="/courses/me105a" title="Gå till kursöversikt över Databasbaserad publicering">
            Databasbaserad publicering<small>ME105A</small>
        </a>
    </h3>

    <ul class="course-overview">
        

        
        <li>
            <span class="course-overview-element">
                Laborationer
                <span class="expand">+</span>
            </span>
            <ul class="course-overview-submenu">
                
                <li>
                    <a href="/courses/me105a/exercises/lab1.html" title="Gå till laborationen Laboration 1">
                        Laboration 1
                    </a>
                </li>
                
            </ul>
        </li>
        

        

        
        <li>
            <span class="course-overview-element">
                Föreläsningar
                <span class="expand">+</span>
            </span>
            <ul class="course-overview-submenu">
                
                <li>
                    <a href="/courses/me105a/lectures/lecture1.html" title="Gå till föreläsningen Föreläsning 1">
                        Föreläsning 1
                    </a>
                </li>
                
                <li>
                    <a href="/courses/me105a/lectures/lecture2.html" title="Gå till föreläsningen Föreläsning 2">
                        Föreläsning 2
                    </a>
                </li>
                
            </ul>
        </li>
        

        
    </ul>
</div>

        <div class="up">
    <a href="#">&uarr;</a>
</div>


        <div class="content">
        
            <h1 id="databasbaserad-publicering">Databasbaserad publicering</h1>

<h2 id="frelsning-2">Föreläsning 2</h2>

<hr />

<h3 id="idag">Idag</h3>

<ul>
  <li>PHP-repetition</li>
  <li>Kommunicera med databas</li>
</ul>

<hr />

<h3 id="arrayer-och-loopar">Arrayer och loopar</h3>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$list</span><span class="o">=</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;januari&#39;</span><span class="p">,</span><span class="s1">&#39;februari&#39;</span><span class="p">,</span><span class="s1">&#39;mars&#39;</span><span class="p">);</span>
<span class="c1">//standard for-loop för att loopa igenom array</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$i</span><span class="o">&lt;</span><span class="nb">count</span><span class="p">(</span><span class="nv">$list</span><span class="p">);</span><span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$list</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//specialvariant av loop som passar bra för att gå igenom array</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$list</span> <span class="k">as</span> <span class="nv">$month</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$month</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span></code></pre></div>

<p>Båda alternativen skriver ut</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">januari</span>
<span class="x">februari</span>
<span class="x">mars</span></code></pre></div>

<hr />

<h3 id="associativ-array">Associativ array</h3>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">//associativ array (varje element får ett namn)</span>
<span class="nv">$row</span><span class="o">=</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;animal&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span><span class="s1">&#39;color&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;black&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">];</span>
<span class="cp">?&gt;</span><span class="x"></span></code></pre></div>

<p>Följande skrivs ut:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">black</span></code></pre></div>

<p>Vi kan se detta som en rad i en tabell, med rubrik och värde:</p>

<style>
table {border-collapse: collapse;font-size:smaller}
th, td {border: 1px solid #BBBBBB}
th, td {text-align:left}
th, td {padding: 6px;}
</style>

<table>
  <thead>
    <tr>
      <th>id</th>
      <th>animal</th>
      <th>color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>cat</td>
      <td>black</td>
    </tr>
  </tbody>
</table>

<hr />

<h3 id="flerdimensionell-array">Flerdimensionell array</h3>

<p>I föregående exemplet hade vi bara en rad. Om vi vill spara flera rader i en array behöver vi en <strong>tvådimensionell</strong> array. </p>

<table>
  <thead>
    <tr>
      <th>id</th>
      <th>animal</th>
      <th>color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>cat</td>
      <td>black</td>
    </tr>
    <tr>
      <td>2</td>
      <td>dog</td>
      <td>white</td>
    </tr>
    <tr>
      <td>3</td>
      <td>elephant</td>
      <td>pink</td>
    </tr>
  </tbody>
</table>

<hr />

<p>Denna tabell kan sparas så här i en tvådimensionell php-array</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$cat</span><span class="o">=</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="o">=&gt;</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;animal&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span><span class="s1">&#39;color&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;black&#39;</span><span class="p">);</span>
<span class="nv">$dog</span><span class="o">=</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="o">=&gt;</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;animal&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span><span class="s1">&#39;color&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;white&#39;</span><span class="p">);</span>
<span class="nv">$elephant</span><span class="o">=</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="o">=&gt;</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;animal&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;elephant&#39;</span><span class="p">,</span><span class="s1">&#39;color&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;pink&#39;</span><span class="p">);</span>

<span class="nv">$table</span><span class="o">=</span><span class="k">array</span><span class="p">(</span><span class="nv">$cat</span><span class="p">,</span><span class="nv">$dog</span><span class="p">,</span><span class="nv">$elephant</span><span class="p">);</span>
<span class="c1">//eftersom $cat, $dog och $elephant är arrayer, som i sin tur</span>
<span class="c1">//sparas i en array, blir $table en array av arrayer eller en </span>
<span class="c1">//tvådimensionell array</span>

<span class="c1">//vi kan skriva ut färgen på andra djuret på följande vis:</span>
<span class="k">echo</span> <span class="s2">&quot;The color is &quot;</span> <span class="o">.</span> <span class="nv">$table</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">];</span>

<span class="c1">//$table[1] motsvarar hela andra raden i tabellen ($dog)</span>
<span class="c1">//eftersom numrering börjar från ett.</span>
<span class="c1">//$table[1][&#39;color&#39;] motsvarar i sin tur innehållet </span>
<span class="c1">//i kolumnen &#39;color&#39; i andra raden</span></code></pre></div>

<p>Följande skrivs ut: </p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">The color is white</span></code></pre></div>

<hr />

<p>Vi kan använda foreach-loopen för att loopa igenom hela tabellen:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">foreach</span> <span class="p">(</span><span class="nv">$table</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;animal&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>Följande skrivs ut:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">cat</span>
<span class="x">dog</span>
<span class="x">elephant</span></code></pre></div>

<hr />

<h3 id="skresultat-frn-databas">Sökresultat från databas</h3>

<p>Relationsdatabaser lagrar data i tabeller. Det normala när man gör en sökning i en databas med <code>select</code> är att resultatet blir en tvådimensionell array liknande <code>$table</code> i exemplet. </p>

<p>Här är en komplett sökning som söker i tabellen <code>animals</code>:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$pdo</span><span class="o">=</span><span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">&#39;mysql:host=localhost;dbname=k3bope&#39;</span><span class="p">,</span><span class="s1">&#39;k3bope&#39;</span><span class="p">,</span><span class="s1">&#39;lösenord&#39;</span><span class="p">);</span> 
<span class="nv">$sql</span><span class="o">=</span><span class="s1">&#39;SELECT * FROM animals&#39;</span><span class="p">;</span>
<span class="nv">$result</span><span class="o">=</span><span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
<span class="c1">//foreach som i exemplet innan men med $result istället för $table</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$result</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;animal&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<hr />

<h3 id="phpmyadmin-och-mysql-query-browser">PHPMyAdmin och MySQL Query Browser</h3>

<p>I kursen kommer vi att använda MySQL Query Browser, ett webb-baserat verktyg för att administrera MySQL-databaser. I boken beskrivs ett liknande verktyg, phpMyAdmin. </p>

<p><img src="im2/mysqlquery_myadmin.png" alt="" /></p>

<hr />

<h3 id="bilaga">BILAGA</h3>

<p>SQL-kod för att skapa tabellen animals och lägga in data:</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">animals</span> <span class="p">(</span>
<span class="n">id</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="n">animal</span> <span class="nb">TEXT</span><span class="p">,</span>
<span class="n">color</span> <span class="nb">TEXT</span><span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">animals</span> <span class="p">(</span><span class="n">animal</span><span class="p">,</span><span class="n">color</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span><span class="s1">&#39;black&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">animals</span> <span class="p">(</span><span class="n">animal</span><span class="p">,</span><span class="n">color</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span><span class="s1">&#39;white&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">animals</span> <span class="p">(</span><span class="n">animal</span><span class="p">,</span><span class="n">color</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">&#39;elephant&#39;</span><span class="p">,</span><span class="s1">&#39;pink&#39;</span><span class="p">);</span></code></pre></div>


        

        <footer class="contribute">
    <p>Har du upptäckt ett fel eller vill bidra med förslag till ändringar? <a href="https://github.com/mah-webb/mah-webb.github.io/pulls" target="_blank" title="Gå till GitHub">Skicka en pull request på GitHub</a>!</p>
</footer>

        </div>

        <footer class="footer">
<div class="footer-inner">
    <p class="license">
        Användning av allt material är fritt, om motsatsen inte anges. Formellt utrycks detta med licensen <a href="http://creativecommons.org/licenses/by/2.5/se/" target="_blank" title="Gå till Creative Commons licens sida">Creative Commons Erkännande 2.5 Sverige</a>.
    </p>
    <p class="fork">
        Detta projekt är publicerat som <a href="https://github.com/mah-webb/mah-webb.github.io" target="_blank" title="Gå till GitHub">öppen källkod på GitHub</a>. Föreslå gärna ändringar och bidra med förbättringar genom att göra en <a href="https://github.com/mah-webb/mah-webb.github.io" target="_blank" title="Gå till GitHub">fork av detta projekt på GitHub</a>.
    </p>
    <ul class="footer-links">
        <li>
            <a href="/" title="Gå till startsidan">Hem</a>
        </li>
        <li>
            <a href="/courses" title="Gå till kursöversikt">Kurser</a>
        </li>
        <li>
            <a href="/blog" title="Gå till bloggöversikt">Blogg</a>
        </li>
        <li>
            <a href="/contact" title="Gå till kontaktsidan">Kontakt</a>
        </li>
    </ul>
</div>
</footer>

<script src="/assets/js/common.js"></script>

    </body>
</html>
